<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8" />
	<title>Panel de Administración</title>
	<script>
		const administrador = JSON.parse(localStorage.getItem("administrador"));
		if (!administrador || !administrador.id) {
			window.location.href = "admin.html";
		}
	</script>
	<link rel="stylesheet" href="estilos/panel.css" />
</head>

<body>
	<header class="header">
		<div class="logo">
			<img src="img/logo_corto.jpg" alt="Breez Logo" class="logo-breez" />
		</div>
		<nav class="navegacion">
			<a href="inicio.html" class="link-nav">Volver a tienda</a>
			<a href="añadir.html" class="link-nav">Añadir vehiculo↗️</a>
			<a href="solicitudes.html" class="link-nav">Solicitudes❗</a>
			<button onclick="logout()" class="cerrar-sesion">Cerrar sesión</button>
		</nav>
	</header>

	<section class="mostrar-coches">
		<h1>Bienvenido, administrador</h1>
		<h2>Panel de Gestión</h2>
		<div id="botones-orden" class="orden-controles">
			<button onclick="ordenarPor('id')" class="boton-busqueda">
				Ordenar por ID
			</button>
			<button onclick="ordenarPor('marca')" class="boton-busqueda">
				Marca
			</button>
			<button onclick="ordenarPor('modelo')" class="boton-busqueda">
				Modelo
			</button>
			<button onclick="ordenarPor('año')" class="boton-busqueda">Año</button>
			<button onclick="ordenarPor('estado')" class="boton-busqueda">
				Estado
			</button>
			<button onclick="ordenarPor('velocidad')" class="boton-busqueda">CV</button>
			<button onclick="ordenarPor('precio')" class="boton-busqueda">
				Precio
			</button>
			<button onclick="ordenarPor('matricula')" class="boton-busqueda">
				Matrícula
			</button>
			<div class="filtros">
				<input type="text" id="filtro-id" placeholder="Filtrar por ID" class="text-filtro" />
				<input type="text" id="filtro-matricula" placeholder="Filtrar por Matrícula" class="text-filtro" />
				<input type="number" id="filtro-precio" placeholder="Máximo Precio (€)" class="text-filtro" />
				<button onclick="aplicarFiltros()" class="boton-busqueda">Filtrar</button>
				<button onclick="resetFiltros()" class="boton-busqueda">Reset</button>
			</div>
		</div>

		<table id="tabla-coches">
			<thead>
				<tr>
					<th>Id</th>
					<th>Matrícula</th>
					<th>Marca</th>
					<th>Modelo</th>
					<th>Año</th>
					<th>Estado</th>
					<th>Color</th>
					<th>CV</th>
					<th>Precio</th>
					<th>Editar</th>
				</tr>
			</thead>
			<tbody id="cuerpo-tabla-coches"></tbody>
		</table>

		<div class="paginacion">
			<button id="btn-anterior" disabled class="boton-busqueda">
				Anterior
			</button>
			<span id="pagina-actual"> Página 1 </span>
			<button id="btn-siguiente" class="boton-busqueda">Siguiente</button>
		</div>
		
		<div id="panel-edicion" class="panel-edicion oculto">
			<div class="panel-contenido">
				<h3>Editar Vehículo</h3>
				<form id="form-editar-coche">
					<input type="hidden" id="editar-id">

					<label>Matrícula</label>
					<input type="text" id="editar-matricula" required>

					<label>Marca</label>
					<input type="text" id="editar-marca" required>

					<label>Modelo</label>
					<input type="text" id="editar-modelo" required>

					<label>Año</label>
					<input type="number" id="editar-año" required>

					<label>Color</label>
					<input type="text" id="editar-color">

					<label>CV</label>
					<input type="number" id="editar-velocidad" required>

					<label>Precio</label>
					<input type="number" id="editar-precio" step="0.01">

					<label>Estado</label>
					<select id="editar-estado">
						<option value="disponible">Disponible</option>
						<option value="alquilado">Alquilado</option>
					</select>

					<div class="acciones">
						<button type="submit">Guardar</button>
						<button type="button" onclick="cerrarPanel()">Cancelar</button>
					</div>
				</form>
			</div>
		</div>

	</section>
	<script>
		function logout() {
			localStorage.removeItem("administrador");
			window.location.href = "admin.html";
		}
	</script>
	<script src="panel.js"></script>
</body>

</html>